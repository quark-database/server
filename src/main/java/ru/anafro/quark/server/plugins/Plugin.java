package ru.anafro.quark.server.plugins;

import ru.anafro.quark.server.logging.Logger;

import static ru.anafro.quark.server.utils.strings.Wrapper.quoted;

/**
 * Quark Plugin API makes Quark extremely powerful. It opens
 * a gate to the world of unlimited extending of functionality.
 *
 * To know how to use Quark Plugin API, read the information at
 * official Quark GitHub: <a href="https://github.com/anafro/quark">here</a>.
 *
 * If you are too lazy to read the whole article (or just don't have so much time),
 * read the steps below to understand how to create your first simple plugin:
 *
 * <ol>
 *     <li>
 *         First, create a project in your IDE or code editor. Name it somehow.
 *     </li>
 *     <li>
 *         Then, create a new class like this: Your project name + "Plugin".
 *         Let's say you want to create a "Cake" plugin, so you need to create your
 *         class "CakePlugin".
 *     </li>
 *     <li>
 *         Created a class? Then, inherit from the {@link Plugin} class.
 *     </li>
 *     <li>
 *         Implement the default constructor inside your class like so:
 *         <pre>
 *         {@code
 *             public CakePlugin() {
 *                 super(
 *                      "Cake",             // <- Plugin name
 *                      "Anatoly Frolov"    // <- Your name (Or the plugin author, if you wish)
 *                 );
 *             }
 *         }
 *         </pre>
 *
 *         Don't forget to remove the default constructor arguments probably generated by your IDE:
 *
 *         <pre>
 *         {@code
 *             //                VVVVVVVVVVVVVVVVV  VVVVVVVVVVVVVVVVVVV
 *             public CakePlugin(String pluginName, String pluginAuthor) { // Plugin won't work if you leave these arguments.
 *                 super("Cake", "Anatoly Frolov");
 *             }
 *         }
 *         </pre>
 *     </li>
 *     <li>
 *         After that, implement an <code>onEnable()</code> method.
 *         <pre>
 *         {@code
 *              @Override
 *              public void onEnable() {
 *                  logger.info("Hello from the Cake!");
 *              }
 *         }
 *         </pre>
 *         This method will be run before the server startup. It should be
 *         used for plugin initialization, like file loading or connecting with API
 *         in the Internet, but we can leave it like so.
 *     </li>
 *     <li>
 *         To make our plugin more interesting, let's add a new console command!
 *         Adding a new command should be in the constructor or inside the <code>onEnable</code>
 *         method.
 *
 *         <pre>
 *         {@code
 *             public CakePlugin() {
 *                 super("Cake", "Anatoly Frolov");
 *
 *                 Quark.commands().add(new CommandBuilder()
 *                      .name("cake")
 *                      .shortDescription("Gives you a cake")
 *                      .longDescription("Makes a really tasty cake and gives it to you!")
 *                      .action(arguments -> logger.info("Hey! There's a cake for you! Is it tasty? :)"))
 *                 );
 *             }
 *         }
 *         </pre>
 *     </li>
 *     <li>
 *         Our plugin is almost done! Create a new file named "Plugin Class Path.txt" inside project's resources.
 *         Put a full package path to your class including the class' name. For example:
 *         <pre>
 *             io.cakemaker.CakePlugin
 *         </pre>
 *     </li>
 *     <li>
 *         Compile your project into a .jar-file and put into "Plugins" folder inside Quark Server and reload the server.
 *     </li>
 *     <li>
 *         That's it! Enjoy your cake plugin (or another plugin you made) :)
 *     </li>
 * </ol>
 *
 * @since  Quark 1.1
 * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
 * @see    Plugin#Plugin(String, String)
 */
public class Plugin {
    protected final String name;
    protected final String author;
    protected final Logger logger;

    /**
     * Creates a new plugin object. Call it inside your plugin constructor and
     * <strong>don't forget to remove the constructor's arguments (all of them)</strong>.
     *
     * @param pluginName   your plugin name.
     * @param pluginAuthor your name.
     *
     * @since  Quark 1.1
     * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
     */
    public Plugin(String pluginName, String pluginAuthor) {
        this.name = pluginName;
        this.author = pluginAuthor;
        this.logger = new Logger("Plugin %s".formatted(quoted(name)));
    }

    /**
     * This method will be run before the server startup.
     * Override it to initialize your plugins (load files you need, run commands you need and so on).
     *
     * @since  Quark 1.1
     * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
     */
    public void onEnable() {
        //
    }

    /**
     * Returns a name of the plugin.
     *
     * @return the plugin's name.
     *
     * @since  Quark 1.1
     * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
     */
    public String getName() {
        return name;
    }

    /**
     * Returns a logger of the plugin.
     *
     * @return the plugin's logger.
     *
     * @since  Quark 1.1
     * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
     */
    public Logger getLogger() {
        return logger;
    }

    /**
     * Returns a name of the author that created this plugin.
     *
     * @return the author's name.
     *
     * @since  Quark 1.1
     * @author Anatoly Frolov | Анатолий Фролов | <a href="https://anafro.ru">My website</a>
     */
    public String getAuthor() {
        return author;
    }
}
